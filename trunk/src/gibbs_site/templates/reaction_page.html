{% with "Reaction" as title %}
	{% include "header.html" %}
{% endwith %}

	{% if not reaction.is_balanced %}
		<div class="warning">Reaction is not balanced!
		{% if reaction.balanced_with_water and balance_with_water_link %}
		<a href="{{ balance_with_water_link }}">Balance with water?</a>
		{% else %}
			{% if reaction.extra_atoms %}
			<div>Extra reactant atoms:
			{% for atom, count in reaction.extra_atoms %}
			<span>{{ count }}</span> <span class="atom">{{ atom }}</span> {% if not forloop.last %}, {% endif %}
			{% endfor %}
			</div>
			{% endif %}
			{% if reaction.missing_atoms %}
			<div>Extra product atoms:
			{% for atom, count in reaction.missing_atoms %}
			<span>{{ count }}</span> <span class="atom">{{ atom }}</span>{% if not forloop.last %}, {% endif %}
			{% endfor %}
			</div>
			{% endif %}
		{% endif %}
		</div>
	{% endif %}

	<form id="rxnForm" name="reactionForm" action="/reaction" method="get">
		<input type="hidden" name="query" value="{{ query }}" />
		<div class="parsedRxn">
			{% for compound in reaction.reactants %}
				{% with "reactants" as reaction_side %}
					{% include "compound_in_reaction.html" %}
				{% endwith %}
				
				{% if not forloop.last %} + {% endif %}
			{% endfor %}
			&rarr;
			{% for compound in reaction.products %}
				{% with "products" as reaction_side %}
					{% include "compound_in_reaction.html" %}
				{% endwith %}
				
				{% if not forloop.last %} + {% endif %}
			{% endfor %}
		</div>
		
		{% with "&Delta;<sub>r</sub>G'&deg;" as delta_g_label %} 
			{% include "result_table.html" %}
		{% endwith %}
	
		<input type="submit" value="Update" />
	</form>	

{% include "footer.html" %}