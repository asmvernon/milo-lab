<html>
	<head>
		<title>{{ analysis_type }} Results</title>
		<style>
			.pathwayResult {
				margin: 0 0 10px 0;
			}
			.pathwayName {
				font-weight: bold;
				font-size: 20px;
			}
			.resultValue {
				font-weight: bold;
				font-size: 16px;
			}
			.resultTable {
				margin: 0 0 5px 0;
			}
			.fixedConc {
				background-color: #FFFF66;
			}
			.concAtLB {
				background-color: #00FF99;
			}
			.concAtUB {
				background-color: #00CCFF;
			}
			.rxnAtMTDF {
				background-color: #00CCFF;
			}
		</style>
	</head>
	<body>
	{% for result in results %}		
		<div class="pathwayResult">
			<div class="pathwayName">{{result.model.name}}</div>
			<div class="resultValue">{{result.optimization_type}} = {{result.opt_val|stringformat:".2g"}} {{result.optimization_units}}</div>
			{% if result.forward_fraction %}
			<div class="resultValue">Total Forward Flux Fraction = {{result.forward_fraction|stringformat:".2g"}}</div>
			{% endif %}
			
			<div class="resultTable">
				<ul>
				{% for rxn in result.reaction_objects %}
					<li>{{ rxn.hypertext_with_names|safe }}</li>
				{% endfor %}
					<li>Net Reaction: {{ result.net_reaction.hypertext_with_names|safe }}</li>
				</ul>
			</div>
			
			<div class="resultTable">
				<div class="tableTitle">Compound Concentrations (M)</div>
				<table border="1">
					<tr>
						<td>Compound Name</td>
						<td>Compound ID</td>
						<td>Concentration LB</td>
						<td>Concentration UB</td>
						<td>Concentration</td>
					</tr>
				{% for deets in result.compound_details %}
					<tr {% if deets.class != None %}class="{{deets.class}}"{% endif %}>
						<td>{{deets.name}}</td>
						<td>{{deets.id}}</td>
						<td>{{deets.lb|stringformat:".2g"}}</td>
						<td>{{deets.ub|stringformat:".2g"}}</td>
						<td>{{deets.concentration|stringformat:".2g"}}</td>
					</tr>
				{% endfor %}
				</table>
			</div>
			
			<div class="resultTable">
				<div class="tableTitle">Reaction Gibbs Energies (kJ/mol)</div>
				<table border="1">
					<tr>
						<td>Reaction ID</td>
						<td>Relative Flux</td>
						<td>&Delta;<sub>r</sub>G'&deg;</td>
						<td>&Delta;<sub>r</sub>G'</td>
						<td>Thermodynamic Efficiency</td>
					</tr>
				{% for deets in result.reaction_details %}
					<tr {% if deets.at_mtdf %}class="rxnAtMTDF"{% endif %}>
						<td>{{deets.id}}</td>
						<td>{{deets.flux}}</td>
						<td>{{deets.dGr0_tag|stringformat:".4g"}}</td>
						<td>{{deets.dGr_tag|stringformat:".4g"}}</td>
						<td>{{deets.thermo_efficiency|stringformat:".3g"}}</td>
					</tr>
				{% endfor %}
				</table>
			</div>
			
			{% if result.thermo_profile_filename != None %}
			<div class="pathwayGraph">
				<img src="pathway_graphs/{{ result.thermo_profile_filename }}" />
			</div>
			{% endif %}
			{% if result.protein_level_filename != None %}
			<div class="pathwayGraph">
				<img src="pathway_graphs/{{ result.protein_level_filename }}" />
			</div>
			{% endif %}
			{% if result.pathway_graph_filename != None %}
			<div class="pathwayGraph">
				<object data="pathway_graphs/{{result.pathway_graph_filename}}"
					    type="image/svg+xml" width=480 height=800
					    name="{{result.model.name}}" frameborder="0"
					    marginwidth="0" marginheight="0"/></object>
			</div>
			{% endif %}
		</div>
	{% endfor %}
	</body>
</html>